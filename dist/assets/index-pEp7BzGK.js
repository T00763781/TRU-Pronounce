var $e=Object.defineProperty;var Qe=(e,t,n)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ke=(e,t,n)=>Qe(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(s){if(s.ep)return;s.ep=!0;const c=n(s);fetch(s.href,c)}})();function pe(){}function Je(e){return e()}function Ne(){return Object.create(null)}function ne(e){e.forEach(Je)}function Ke(e){return typeof e=="function"}function Xe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function xe(e){return Object.keys(e).length===0}function i(e,t){e.appendChild(t)}function M(e,t,n){e.insertBefore(t,n||null)}function B(e){e.parentNode&&e.parentNode.removeChild(e)}function Le(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function V(e){return document.createTextNode(e)}function b(){return V(" ")}function N(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function _(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function et(e){return Array.from(e.childNodes)}function F(e,t){t=""+t,e.data!==t&&(e.data=t)}function z(e,t){e.value=t??""}function P(e,t,n,l){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function je(e,t,n){for(let l=0;l<e.options.length;l+=1){const s=e.options[l];if(s.__value===t){s.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function tt(e){const t=e.querySelector(":checked");return t&&t.__value}let he;function de(e){he=e}function nt(){if(!he)throw new Error("Function called outside component initialization");return he}function lt(e){nt().$$.on_mount.push(e)}const x=[],Pe=[];let te=[];const Ve=[],st=Promise.resolve();let Ce=!1;function ot(){Ce||(Ce=!0,st.then(Ze))}function we(e){te.push(e)}const Se=new Set;let X=0;function Ze(){if(X!==0)return;const e=he;do{try{for(;X<x.length;){const t=x[X];X++,de(t),it(t.$$)}}catch(t){throw x.length=0,X=0,t}for(de(null),x.length=0,X=0;Pe.length;)Pe.pop()();for(let t=0;t<te.length;t+=1){const n=te[t];Se.has(n)||(Se.add(n),n())}te.length=0}while(x.length);for(;Ve.length;)Ve.pop()();Ce=!1,Se.clear(),de(e)}function it(e){if(e.fragment!==null){e.update(),ne(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(we)}}function ct(e){const t=[],n=[];te.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),te=t}const rt=new Set;function at(e,t){e&&e.i&&(rt.delete(e),e.i(t))}function ee(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ut(e,t,n){const{fragment:l,after_update:s}=e.$$;l&&l.m(t,n),we(()=>{const c=e.$$.on_mount.map(Je).filter(Ke);e.$$.on_destroy?e.$$.on_destroy.push(...c):ne(c),e.$$.on_mount=[]}),s.forEach(we)}function ft(e,t){const n=e.$$;n.fragment!==null&&(ct(n.after_update),ne(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function dt(e,t){e.$$.dirty[0]===-1&&(x.push(e),ot(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function pt(e,t,n,l,s,c,o=null,m=[-1]){const r=he;de(e);const a=e.$$={fragment:null,ctx:[],props:c,update:pe,not_equal:s,bound:Ne(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(r?r.$$.context:[])),callbacks:Ne(),dirty:m,skip_bound:!1,root:t.target||r.$$.root};o&&o(a.root);let k=!1;if(a.ctx=n?n(e,t.props||{},(u,L,...g)=>{const S=g.length?g[0]:L;return a.ctx&&s(a.ctx[u],a.ctx[u]=S)&&(!a.skip_bound&&a.bound[u]&&a.bound[u](S),k&&dt(e,u)),L}):[],a.update(),k=!0,ne(a.before_update),a.fragment=l?l(a.ctx):!1,t.target){if(t.hydrate){const u=et(t.target);a.fragment&&a.fragment.l(u),u.forEach(B)}else a.fragment&&a.fragment.c();t.intro&&at(e.$$.fragment),ut(e,t.target,t.anchor),Ze()}de(r)}class ht{constructor(){ke(this,"$$");ke(this,"$$set")}$destroy(){ft(this,1),this.$destroy=pe}$on(t,n){if(!Ke(n))return pe;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(t){this.$$set&&!xe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const _t="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(_t);function mt(){var t,n;return(((n=(t=window.speechSynthesis).getVoices)==null?void 0:n.call(t))||[]).filter(l=>l.localService===!0)}function vt(e,t,n={}){if(!window.speechSynthesis)throw new Error("Web Speech API not available");window.speechSynthesis.cancel();const l=new SpeechSynthesisUtterance(e);return t&&(l.voice=t),typeof n.rate=="number"&&(l.rate=n.rate),typeof n.pitch=="number"&&(l.pitch=n.pitch),typeof n.volume=="number"&&(l.volume=n.volume),window.speechSynthesis.speak(l),l}const gt={ER:"ur",AR:"ahr",OR:"or",SH:"sh",CH:"ch",TH:"th",NG:"ng",EE:"ee",OO:"oo",AY:"ay",EYE:"eye",OW:"ow",AH:"uh",UH:"uh",OH:"oh",L:"luh",R:"r",M:"m",N:"n",S:"s",T:"t",K:"k",D:"d",B:"b",P:"p",V:"v",F:"f",G:"g",H:"h",J:"j",W:"w",Y:"y",Z:"z"};function bt(e){const t=(e||"").trim(),n=t.toLowerCase();if(!t)return{chips:[],sayAs:""};const l={earl:{labels:["ER","L"],sayAs:"earl"},sam:{labels:["SA","M"],sayAs:"sam"},ng:{labels:["NG"],sayAs:"ng"}};if(l[n]){const o=l[n];return{chips:o.labels.map(r=>({label:r,speak:gt[r]||r.toLowerCase()})),sayAs:o.sayAs}}const s=n.match(/[bcdfghjklmnpqrstvwxyz]*[aeiouy]+[bcdfghjklmnpqrstvwxyz]*/g)||[n];return{chips:s.filter(Boolean).slice(0,5).map(o=>({label:o.toUpperCase(),speak:o})),sayAs:s.join("-")}}function Be(e,t){return`${e.map(l=>l.speak).join(", ")}. ${t}`}function Te(e,t,n){const l=e.slice();return l[28]=t[n],l}function He(e,t,n){const l=e.slice();return l[31]=t[n],l[32]=t,l[33]=n,l}function Me(e,t,n){const l=e.slice();return l[34]=t[n],l}function De(e){let t,n;return{c(){t=p("div"),n=V(e[1]),_(t,"class","status svelte-6ek3w8")},m(l,s){M(l,t,s),i(t,n)},p(l,s){s[0]&2&&F(n,l[1])},d(l){l&&B(t)}}}function ze(e){let t,n,l,s=ee(e[4]),c=[];for(let o=0;o<s.length;o+=1)c[o]=Fe(Me(e,s,o));return{c(){t=p("div"),t.textContent="Library Variants",n=b(),l=p("div");for(let o=0;o<c.length;o+=1)c[o].c();_(t,"class","bar svelte-6ek3w8"),_(l,"class","variants svelte-6ek3w8")},m(o,m){M(o,t,m),M(o,n,m),M(o,l,m);for(let r=0;r<c.length;r+=1)c[r]&&c[r].m(l,null)},p(o,m){if(m[0]&1296){s=ee(o[4]);let r;for(r=0;r<s.length;r+=1){const a=Me(o,s,r);c[r]?c[r].p(a,m):(c[r]=Fe(a),c[r].c(),c[r].m(l,null))}for(;r<c.length;r+=1)c[r].d(1);c.length=s.length}},d(o){o&&(B(t),B(n),B(l)),Le(c,o)}}}function Fe(e){let t,n,l=e[34].name+"",s,c,o,m,r=e[34].cardId+"",a,k,u,L;function g(){return e[17](e[34])}return{c(){t=p("div"),n=p("h4"),s=V(l),c=b(),o=p("button"),m=V("Use "),a=V(r),k=b(),_(n,"class","svelte-6ek3w8"),_(o,"class","btn-yellow svelte-6ek3w8"),_(t,"class","variant svelte-6ek3w8")},m(S,O){M(S,t,O),i(t,n),i(n,s),i(t,c),i(t,o),i(o,m),i(o,a),i(t,k),u||(L=N(o,"click",g),u=!0)},p(S,O){e=S,O[0]&16&&l!==(l=e[34].name+"")&&F(s,l),O[0]&16&&r!==(r=e[34].cardId+"")&&F(a,r)},d(S){S&&B(t),u=!1,L()}}}function Ye(e){let t,n,l,s,c,o,m,r;function a(){e[18].call(n,e[32],e[33])}function k(...g){return e[19](e[33],...g)}function u(){e[20].call(o,e[32],e[33])}function L(...g){return e[21](e[33],...g)}return{c(){t=p("div"),n=p("input"),l=b(),s=p("small"),s.textContent="→",c=b(),o=p("input"),_(n,"class","svelte-6ek3w8"),_(s,"class","svelte-6ek3w8"),P(o,"width","90px"),P(o,"text-transform","none"),P(o,"font-weight","700"),_(o,"class","svelte-6ek3w8"),_(t,"class","chip svelte-6ek3w8")},m(g,S){M(g,t,S),i(t,n),z(n,e[31].label),i(t,l),i(t,s),i(t,c),i(t,o),z(o,e[31].speak),m||(r=[N(n,"input",a),N(n,"input",k),N(o,"input",u),N(o,"input",L)],m=!0)},p(g,S){e=g,S[0]&32&&n.value!==e[31].label&&z(n,e[31].label),S[0]&32&&o.value!==e[31].speak&&z(o,e[31].speak)},d(g){g&&B(t),m=!1,ne(r)}}}function qe(e){let t,n;return{c(){t=p("div"),n=V(e[7]),_(t,"class","hint svelte-6ek3w8")},m(l,s){M(l,t,s),i(t,n)},p(l,s){s[0]&128&&F(n,l[7])},d(l){l&&B(t)}}}function Ge(e){let t,n=e[28].name+"",l,s,c=e[28].lang+"",o,m;return{c(){t=p("option"),l=V(n),s=V(" — "),o=V(c),t.__value=m=e[28].voiceURI,z(t,t.__value)},m(r,a){M(r,t,a),i(t,l),i(t,s),i(t,o)},p(r,a){a[0]&4&&n!==(n=r[28].name+"")&&F(l,n),a[0]&4&&c!==(c=r[28].lang+"")&&F(o,c),a[0]&4&&m!==(m=r[28].voiceURI)&&(t.__value=m,z(t,t.__value))},d(r){r&&B(t)}}}function wt(e){let t,n,l,s,c,o,m,r,a,k,u,L,g,S,O,W,Y,J,_e,me,w,K,le,ve,T,se,q,ge,oe,d,v,y,H,C,Z,D,ie,Ae,ce,Ee,re,Oe,G,ae,Ie,ue,Re,be,ye,Ue,I=e[1]&&De(e),R=e[4].length&&ze(e),$=ee(e[5]),A=[];for(let f=0;f<$.length;f+=1)A[f]=Ye(He(e,$,f));let U=e[7]&&qe(e),Q=ee(e[2]),E=[];for(let f=0;f<Q.length;f+=1)E[f]=Ge(Te(e,Q,f));return{c(){t=p("div"),n=p("div"),l=p("div"),s=p("div"),s.textContent="Name/builder",c=b(),o=p("p"),o.textContent="Type a name. If it exists in the curated library, variants appear below. Otherwise, we generate teaching chips you can edit.",m=b(),I&&I.c(),r=b(),a=p("div"),k=p("div"),u=p("input"),L=b(),g=p("button"),g.textContent="Update",S=b(),O=p("div"),W=V("Natural: "),Y=p("b"),J=V(e[6]),_e=b(),R&&R.c(),me=b(),w=p("div"),K=p("div"),le=V(e[0]),ve=b(),T=p("div");for(let f=0;f<A.length;f+=1)A[f].c();se=b(),q=p("button"),q.textContent="+",ge=b(),U&&U.c(),oe=b(),d=p("div"),d.textContent="Detected Local Voice Models",v=b(),y=p("select");for(let f=0;f<E.length;f+=1)E[f].c();H=b(),C=p("div"),C.textContent="Add Your Voice",Z=b(),D=p("div"),ie=p("button"),ie.textContent="Record",Ae=b(),ce=p("button"),ce.textContent="Play",Ee=b(),re=p("button"),re.textContent="Save",Oe=b(),G=p("div"),ae=p("button"),ae.textContent="Save Name",Ie=b(),ue=p("button"),ue.textContent="Add to library",Re=b(),be=p("div"),be.textContent='Tip: edit the right-hand "speak" values to avoid letter spelling (e.g., ER → ur; L → luh).',_(s,"class","title svelte-6ek3w8"),_(o,"class","sub svelte-6ek3w8"),_(l,"class","card svelte-6ek3w8"),P(u,"flex","1"),P(u,"padding","12px 14px"),P(u,"border-radius","14px"),P(u,"border","none"),_(u,"placeholder","Type your name..."),_(g,"class","btn-teal svelte-6ek3w8"),P(k,"display","flex"),P(k,"gap","10px"),P(k,"align-items","center"),_(O,"class","status svelte-6ek3w8"),_(a,"class","card svelte-6ek3w8"),P(a,"margin-top","16px"),_(K,"class","name svelte-6ek3w8"),_(q,"class","btn-yellow svelte-6ek3w8"),_(T,"class","chips svelte-6ek3w8"),_(d,"class","bar svelte-6ek3w8"),_(y,"class","svelte-6ek3w8"),e[3]===void 0&&we(()=>e[22].call(y)),_(C,"class","bar svelte-6ek3w8"),_(ie,"class","btn-red svelte-6ek3w8"),ie.disabled=!0,_(ce,"class","btn-green svelte-6ek3w8"),_(re,"class","btn-yellow svelte-6ek3w8"),re.disabled=!0,_(D,"class","row svelte-6ek3w8"),_(ae,"class","btn-teal svelte-6ek3w8"),_(ue,"class","btn-green svelte-6ek3w8"),_(G,"class","row svelte-6ek3w8"),P(G,"margin-top","12px"),_(be,"class","status svelte-6ek3w8"),_(w,"class","builder svelte-6ek3w8"),_(t,"class","wrap svelte-6ek3w8")},m(f,j){M(f,t,j),i(t,n),i(n,l),i(l,s),i(l,c),i(l,o),i(l,m),I&&I.m(l,null),i(n,r),i(n,a),i(a,k),i(k,u),z(u,e[0]),i(k,L),i(k,g),i(a,S),i(a,O),i(O,W),i(O,Y),i(Y,J),i(a,_e),R&&R.m(a,null),i(t,me),i(t,w),i(w,K),i(K,le),i(w,ve),i(w,T);for(let h=0;h<A.length;h+=1)A[h]&&A[h].m(T,null);i(T,se),i(T,q),i(w,ge),U&&U.m(w,null),i(w,oe),i(w,d),i(w,v),i(w,y);for(let h=0;h<E.length;h+=1)E[h]&&E[h].m(y,null);je(y,e[3],!0),i(w,H),i(w,C),i(w,Z),i(w,D),i(D,ie),i(D,Ae),i(D,ce),i(D,Ee),i(D,re),i(w,Oe),i(w,G),i(G,ae),i(G,Ie),i(G,ue),i(w,Re),i(w,be),ye||(Ue=[N(u,"input",e[15]),N(u,"input",e[16]),N(g,"click",e[9]),N(q,"click",e[13]),N(y,"change",e[22]),N(y,"change",e[11]),N(ce,"click",e[12]),N(ae,"click",e[14]),N(ue,"click",e[14])],ye=!0)},p(f,j){if(f[1]?I?I.p(f,j):(I=De(f),I.c(),I.m(l,null)):I&&(I.d(1),I=null),j[0]&1&&u.value!==f[0]&&z(u,f[0]),j[0]&64&&F(J,f[6]),f[4].length?R?R.p(f,j):(R=ze(f),R.c(),R.m(a,null)):R&&(R.d(1),R=null),j[0]&1&&F(le,f[0]),j[0]&32){$=ee(f[5]);let h;for(h=0;h<$.length;h+=1){const fe=He(f,$,h);A[h]?A[h].p(fe,j):(A[h]=Ye(fe),A[h].c(),A[h].m(T,se))}for(;h<A.length;h+=1)A[h].d(1);A.length=$.length}if(f[7]?U?U.p(f,j):(U=qe(f),U.c(),U.m(w,oe)):U&&(U.d(1),U=null),j[0]&4){Q=ee(f[2]);let h;for(h=0;h<Q.length;h+=1){const fe=Te(f,Q,h);E[h]?E[h].p(fe,j):(E[h]=Ge(fe),E[h].c(),E[h].m(y,null))}for(;h<E.length;h+=1)E[h].d(1);E.length=Q.length}j[0]&12&&je(y,f[3])},i:pe,o:pe,d(f){f&&B(t),I&&I.d(),R&&R.d(),Le(A,f),U&&U.d(),Le(E,f),ye=!1,ne(Ue)}}}function We(e){return(e||"").trim().toLowerCase().replace(/[^a-z0-9\-]+/g,"-").replace(/\-+/g,"-").replace(/^\-|\-$/g,"")}function yt(e,t,n){const l="https://raw.githubusercontent.com/<ORG>/TRU-Pronounce-Runtime-Library/main";let s="Deiveek",c="",o=[],m="",r=null,a=null,k=[],u=[],L="",g="";async function S(){n(1,c="Loading library...");try{a=await fetch(`${l}/index.json`,{cache:"no-cache"}).then(v=>v.json()),n(1,c="")}catch(d){n(1,c=`Library load failed. Set VITE_LIBRARY_BASE_URL. (${(d==null?void 0:d.message)||d})`)}}async function O(d){return await fetch(`${l}/cards/${d}.json`,{cache:"no-cache"}).then(y=>y.json())}async function W(){var y;const d=We(s);if(n(4,k=[]),(y=a==null?void 0:a.cards)!=null&&y.length){const H=a.cards.filter(C=>C.cardId===d||(C.name||"").toLowerCase()===(s||"").trim().toLowerCase());if(n(4,k=H.slice(0,8)),k.length){const C=await O(k[0].cardId);Y(C);return}}const v=bt(s);n(5,u=v.chips),n(6,L=v.sayAs||(s||"").toLowerCase()),n(7,g="")}function Y(d){var v,y,H;n(0,s=d.name),n(5,u=(((v=d.pronunciation)==null?void 0:v.chips)||[]).map(C=>({label:C.label,speak:C.speak}))),n(6,L=((y=d.pronunciation)==null?void 0:y.sayAs)||(d.name||"").toLowerCase()),n(7,g=((H=d.pronunciation)==null?void 0:H.hint)||"")}function J(){r=o.find(d=>d.voiceURI===m)||null}function _e(){if(!u.length)return;const d=Be(u,L);try{vt(d,r,{rate:.95,pitch:1,volume:1})}catch(v){n(1,c=`Play failed: ${(v==null?void 0:v.message)||v}`)}}function me(){n(5,u=[...u,{label:"NEW",speak:"new"}])}function w(){const d=We(s),v=Be(u,L),y={schemaVersion:"0.2",cardId:d,name:s.trim(),pronunciation:{chips:u,sayAs:L,hint:g},tts:{engine:"web-speech-api",payload:v,voice:r?{voiceURI:r.voiceURI,name:r.name,lang:r.lang,localService:r.localService}:void 0},meta:{createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),source:"user-submission"}},H=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),C=URL.createObjectURL(H),Z=document.createElement("a");Z.href=C,Z.download=`${d}.json`,Z.click(),URL.revokeObjectURL(C),n(1,c="Downloaded submission JSON. Upload it to the Submission Inbox repo (cards/).")}lt(async()=>{var v,y;const d=()=>{n(2,o=mt()),!m&&o.length&&n(3,m=o[0].voiceURI),J()};(y=(v=window.speechSynthesis)==null?void 0:v.addEventListener)==null||y.call(v,"voiceschanged",d),d(),await S(),await W()});function K(){s=this.value,n(0,s)}const le=()=>W(),ve=async d=>Y(await O(d.cardId));function T(d,v){d[v].label=this.value,n(5,u)}const se=(d,v)=>{n(5,u[d].label=v.target.value.toUpperCase(),u),n(5,u=[...u])};function q(d,v){d[v].speak=this.value,n(5,u)}const ge=(d,v)=>{n(5,u[d].speak=v.target.value.toLowerCase(),u),n(5,u=[...u])};function oe(){m=tt(this),n(3,m),n(2,o)}return[s,c,o,m,k,u,L,g,O,W,Y,J,_e,me,w,K,le,ve,T,se,q,ge,oe]}class kt extends ht{constructor(t){super(),pt(this,t,yt,wt,Xe,{},null,[-1,-1])}}new kt({target:document.getElementById("app")});
